<!DOCTYPE html>
<html>
<head>
    <title>Test Copy CSS Fix</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        .font-card {
            border: 1px solid #ddd;
            padding: 20px;
            margin: 20px 0;
            cursor: pointer;
        }
        .font-name {
            font-weight: bold;
            margin-bottom: 10px;
        }
        .btn {
            padding: 8px 16px;
            margin-right: 10px;
            cursor: pointer;
        }
        .btn-primary {
            background-color: #4285F4;
            color: white;
            border: none;
            border-radius: 5px;
        }
        #preview-text {
            padding: 10px;
            border: 1px solid #ddd;
            margin: 20px 0;
            width: 100%;
        }
    </style>
</head>
<body>
    <h1>Test Copy CSS Fix</h1>
    <p>Click on the font card to change preview text font.</p>
    <p>Click on "Copy CSS" button - it should NOT change the preview text font.</p>
    
    <input type="text" id="preview-text" value="Preview text - click should change this font">
    
    <div class="font-card" data-font-name="Test Font" data-font-category="sans-serif">
        <div class="font-name">Test Font</div>
        <div class="font-preview">This is a preview of Test Font</div>
        <div class="font-actions">
            <button class="btn btn-primary" onclick="copyCSS('Test Font', 'sans-serif', event)">Copy CSS</button>
            <button class="btn btn-secondary" onclick="viewOnGoogle('Test Font')">View on Google</button>
        </div>
    </div>
    
    <script>
        let previewText = "Preview text - click should change this font";
        
        function copyCSS(fontName, category, event) {
            // Prevent event bubbling if event is passed
            if (event) {
                event.stopPropagation();
                console.log('Event propagation stopped for Copy CSS button');
            }
            
            console.log('Copy CSS called for:', fontName);
            alert('Copy CSS function called for ' + fontName + ' (would copy to clipboard in real implementation)');
        }
        
        function viewOnGoogle(fontName) {
            console.log('View on Google called for:', fontName);
            alert('View on Google function called for ' + fontName);
        }
        
        function changePreviewFont(fontName, fontCategory) {
            console.log('Preview font changed to:', fontName);
            const previewTextElement = document.getElementById('preview-text');
            if (previewTextElement) {
                previewTextElement.value = 'Font changed to: ' + fontName + ' (this should NOT happen when clicking Copy CSS)';
            }
        }
        
        // Font card clicks - change preview text font
        document.addEventListener('click', (e) => {
            const fontCard = e.target.closest('.font-card');
            if (fontCard) {
                // Don't change preview font if clicking on Copy CSS button or View on Google button
                const copyCSSButton = e.target.closest('.btn-primary');
                const viewGoogleButton = e.target.closest('.btn-secondary');
                
                console.log('Font card clicked. Copy CSS button:', copyCSSButton, 'View Google button:', viewGoogleButton);
                
                if (!copyCSSButton && !viewGoogleButton) {
                    const fontName = fontCard.dataset.fontName;
                    const fontCategory = fontCard.dataset.fontCategory;
                    changePreviewFont(fontName, fontCategory);
                }
            }
        });
    </script>
</body>
</html>